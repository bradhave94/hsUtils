let c=null,o=null,m=null;function p(e,t){c=Array.isArray(e)?e:[e],o=t,m=null;const l=document.getElementById("templateModal"),n=document.getElementById("modalDescription"),a=document.getElementById("confirmTemplateChange");c.length>1?n.innerHTML=`Changing template for ${c.length} pages.<br>Current template: ${o}`:c.length===1?n.innerHTML=`Changing template for 1 page.<br>Current template: ${o}`:n.innerHTML=`Select a new template.<br>Current template: ${o}`,l.style.display="flex",a.disabled=!0;const s=document.querySelector(`[data-template-path="${o}"]`);s&&s.classList.add("current-template"),document.querySelectorAll(".file[data-template-path]").forEach(u=>{u.addEventListener("click",r)})}function i(){const e=document.getElementById("templateModal");e.style.display="none";const t=document.querySelector(".current-template");t&&t.classList.remove("current-template");const l=document.querySelector(".selected-template");l&&l.classList.remove("selected-template"),document.querySelectorAll(".file[data-template-path]").forEach(a=>{a.removeEventListener("click",r)})}function r(e){const t=e.currentTarget,l=t.getAttribute("data-template-path"),n=document.getElementById("confirmTemplateChange"),a=document.querySelector(".selected-template");a&&a.classList.remove("selected-template"),t.classList.add("selected-template"),m=l,n.disabled=!1}document.getElementById("cancelTemplateChange").addEventListener("click",()=>{i(),window.resolveTemplateChange(null)});document.getElementById("confirmTemplateChange").addEventListener("click",()=>{i(),window.resolveTemplateChange(m)});window.openTemplateModal=(e,t)=>new Promise(l=>{window.resolveTemplateChange=l,p(e,t)});let d;window.openDomainModal=e=>{const t=document.getElementById("domainModal"),l=t?.querySelector("h2");return l&&(l.textContent=e==="multiple"?"Select Domain for Multiple Pages":"Select Domain"),t?.classList.remove("hidden"),t?.classList.add("flex"),new Promise(n=>{d=n})};document.getElementById("cancelDomainBtn")?.addEventListener("click",()=>{const e=document.getElementById("domainModal");e?.classList.add("hidden"),e?.classList.remove("flex"),d(null)});document.getElementById("confirmDomainBtn")?.addEventListener("click",()=>{const t=document.getElementById("domainSelect").value,l=document.getElementById("domainModal");l?.classList.add("hidden"),l?.classList.remove("flex"),d(t)});
